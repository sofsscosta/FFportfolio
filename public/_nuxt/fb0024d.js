(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{307:function(e,t,r){"use strict";r.r(t);r(49),r(36),r(48),r(64),r(37),r(65);var n=r(33),o=r(5),c=(r(22),r(47),r(138),r(192),r(3)),l=r(14),d=r(15);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w=c.a.extend({layout:"admin",data:function(){return{title:"",review:{link:"",author:"",text:"",id:""},originalProjectId:"",isLoading:!1,collection:""}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,v,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=e.$route.path.split("/only-ferran-knows-221/reviews/edit/")[1])||e.$router.push("/only-ferran-knows-221/error"),e.review.id=r,t.next=6,l.default.firestore().collection("reviews").doc(r).get();case 6:if(n=t.sent,(o=n.data())||e.$router.push("/only-ferran-knows-221/error"),e.review=f(f({},o),{},{id:e.review.id}),e.review.link){t.next=12;break}return t.abrupt("return");case 12:return c=e.review.link.split("/")[1],t.next=15,l.default.firestore().collection(c).where("slug","==",e.review.link).get();case 15:v=t.sent,w=v.docs[0].data(),e.title=w.title,e.originalProjectId=v.docs[0].id,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),e.$store.dispatch("feedback",d.a.ERROR);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},methods:{editReview:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.$store.dispatch("feedback",d.a.SUBMITTING),t.isLoading=!0,r.next=5,l.default.firestore().collection("reviews").doc(t.review.id).update(e);case 5:return r.next=7,t.$store.dispatch("fetchReviews");case 7:t.$store.dispatch("feedback",d.a.SUCCESS),t.isLoading=!1,r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),t.isLoading=!1,t.$store.dispatch("feedback",d.a.ERROR);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}}),h=r(11),component=Object(h.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"font-light text-gray-500 mb-20 flex flex-col w-full items-center"},[r("p",{staticClass:"text-5xl mt-10 mb-12 font-thin"},[e._v("Update review "),e.title?r("span",[r("span",{staticClass:"font-light"},[e._v(e._s(e.title.toUpperCase()))]),e._v(" project")]):e._e()]),e._v(" "),r("FormulateForm",{staticClass:"max-w-2xl",on:{submit:e.editReview},model:{value:e.review,callback:function(t){e.review=t},expression:"review"}},[r("FormulateInput",{attrs:{type:"text",label:"Author",name:"author",placeholder:"Name of reviewer",validation:"required"}}),e._v(" "),r("FormulateInput",{attrs:{type:"textarea",label:"Text",name:"text",placeholder:"Text - what did they say?",validation:"required"}}),e._v(" "),e.review.link?r("div",{staticClass:" mb-8"},[e._v(" Path to project this review relates to: "),r("span",{staticClass:"font-bold"},[e._v(e._s(e.review.link))])]):e._e(),e._v(" "),e.review.link?r("nuxt-link",{staticClass:"mt-10 bg-gray-200 rounded-full px-3 py-2",attrs:{to:"/only-ferran-knows-221/"+e.collection+"/"+e.originalProjectId}},[e._v(" See related project ")]):e._e(),e._v(" "),e.review.link?e._e():r("div",[e._v("This review is not associated with any project.")]),e._v(" "),r("FormulateInput",{staticClass:"mt-10",attrs:{type:"submit",label:e.isLoading?"LOADING...":"UPDATE REVIEW",disabled:e.isLoading}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);