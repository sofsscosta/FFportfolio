(window.webpackJsonp=window.webpackJsonp||[]).push([[29,22],{287:function(e,t,n){"use strict";n.r(t);var r=n(5),c=(n(22),n(37),n(141),n(41),n(16),n(82),n(3)),o=n(14),l=(n(139),n(265),n(15)),f=o.default.firestore(),d=c.a.extend({layout:"admin",data:function(){return{sections:[]}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.collection("banners").get();case 2:t.sent.forEach((function(t){var n,r=null===(n=t.data())||void 0===n?void 0:n.url;t.id&&e.sections.push({name:t.id,currentImage:r,selectedImage:null,uploadValue:0,error:""})}));case 4:case"end":return t.stop()}}),t)})))()},methods:{currentSection:function(e){return this.sections.find((function(t){return t.name==e}))},onFileSelected:function(section){this.currentSection(section).selectedImage=window.event.target.files[0],this.uploadBanner(section)},uploadBanner:function(section){try{var e=this.currentSection(section),t=o.default.storage().ref("/images/".concat(e.selectedImage.name)).put(e.selectedImage);t.on("state_changed",(function(){}),(function(t){return e.error=t.toString()}),Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.snapshot.ref.getDownloadURL();case 2:return r=n.sent,n.next=5,f.collection("banners").get();case 5:n.sent.forEach((function(e){e.id===section&&e.ref.update({url:r})})),e.currentImage=r;case 8:case"end":return n.stop()}}),n)})))),this.$store.dispatch("feedback",l.a.SUCCESS)}catch(e){this.$store.dispatch("feedback",l.a.ERROR)}}}}),m=n(11),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"font-light text-gray-500"},[n("h2",{staticClass:"text-4xl my-14 font-thin"},[e._v("\n        Hello Ferran! ðŸ“¸\n    ")]),e._v(" "),n("h2",{staticClass:"text-3xl my-14 font-thin"},[e._v("\n        Here is where you update the banners from each page:\n    ")]),e._v(" "),e._l(e.sections,(function(t){var r=t.name,c=t.currentImage,o=t.error;return n("section",{key:r,staticClass:"mb-20"},[n("label",{staticClass:"flex flex-row mb-2",attrs:{for:"banner"}},[e._v("Banner for "),n("p",{staticClass:"font-bold ml-1 text-black"},[e._v(e._s(r.toUpperCase()))])]),e._v(" "),n("img",{key:c,staticClass:"mt-2",attrs:{width:"480",src:c}}),e._v(" "),n("FormulateInput",{staticClass:"mt-2 max-w-md",attrs:{type:"image",name:"banner"},on:{change:function(t){return e.onFileSelected(r)}}}),e._v(" "),o?n("p",{staticClass:"text-red-300"},[e._v(e._s(o))]):e._e(),e._v(" "),n("div")],1)}))],2)}),[],!1,null,null,null);t.default=component.exports},310:function(e,t,n){"use strict";n.r(t);var r=n(287).default,c=n(11),component=Object(c.a)(r,undefined,undefined,!1,null,null,null);t.default=component.exports}}]);