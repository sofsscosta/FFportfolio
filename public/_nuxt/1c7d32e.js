(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{304:function(e,t,r){"use strict";r.r(t);var n=r(5),o=(r(22),r(36),r(52),r(16),r(81),r(41),r(53),r(48),r(140),r(47),r(138),r(66),r(3)),l=r(14),c=(r(139),r(265),r(15)),d=o.a.extend({layout:"admin",data:function(){return{project:{date:"",description:"",image_preview:"",embed:"",slug:"",subtitle:"",title:"",tags:[]},section:"",isLoading:!1}},methods:{createProject:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,n={date:e.date,description:e.description,slug:t.generateSlug(e.title),subtitle:e.subtitle,title:e.title,tags:t.processTags(e.tags),image_preview:e.image_preview[0].url},r.next=5,l.default.firestore().collection("video").add(n);case 5:o=r.sent,t.isLoading=!1,t.$store.dispatch("feedback",c.a.SUCCESS),t.$router.push("/only-ferran-knows-221/video/".concat(o.id)),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),t.isLoading=!1,t.$store.dispatch("feedback",c.a.ERROR);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},uploadImage:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,new Promise((function(r,o){var c=l.default.storage().ref("/images/video/".concat(t.project.title,"/").concat(e.name)).put(e);c.on("state_changed",null,null,Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.snapshot.ref.getDownloadURL();case 3:return t=e.sent,r(t),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),o(void 0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))))}));case 3:return o=r.sent,r.abrupt("return",{url:o});case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},processTags:function(e){return e.filter((function(e){return e.tag})).map((function(e){return e.tag}))},generateSlug:function(title){return"/video/".concat(title.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase().split(" ").join("-"))}}}),m=r(11),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"font-light text-gray-500 mb-20 flex flex-col w-full items-center"},[e._m(0),e._v(" "),r("FormulateForm",{staticClass:"max-w-2xl",on:{submit:e.createProject},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}},[r("FormulateInput",{attrs:{type:"text",label:"Title",name:"title",placeholder:"Title",validation:"required"}}),e._v(" "),r("FormulateInput",{attrs:{type:"text",label:"Subtitle",name:"subtitle",placeholder:"Subtitle"}}),e._v(" "),r("FormulateInput",{attrs:{type:"textarea",label:"Description",name:"description",placeholder:"Description","input-class":"h-56"}}),e._v(" "),r("FormulateInput",{attrs:{type:"text",label:"Date",name:"date",help:"Please inser the date manually in the format you'd like to see displayed. Ex: Aug 2021 or 08/2021",placeholder:"Date"}}),e._v(" "),r("FormulateInput",{attrs:{type:"textarea",label:"Embed video info",name:"embed",placeholder:"Embed",helper:"This is the code you get from youtube/vimeo/other so we can display the video :)","input-class":"h-32"}}),e._v(" "),r("FormulateInput",{attrs:{type:"image",name:"image_preview",label:"Preview image",help:"This image will show on the video section before entering the video detail.",validation:"mime:image/jpeg,image/png,image/gif",uploader:e.uploadImage}}),e._v(" "),r("FormulateInput",{attrs:{type:"group",name:"tags",repeatable:!0,label:"Tags","add-label":"+ Add tag",validation:"max:3"}},[r("FormulateInput",{attrs:{name:"tag",label:"Tag"}})],1),e._v(" "),r("FormulateInput",{staticClass:"mt-10",attrs:{type:"submit",label:e.isLoading?"LOADING...":"CREATE VIDEO PROJECT",disabled:e.isLoading}})],1)],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"text-5xl mt-10 mb-12 font-thin"},[e._v("New "),r("span",{staticClass:"font-light"},[e._v(" VIDEO")]),e._v(" project")])}],!1,null,null,null);t.default=component.exports}}]);